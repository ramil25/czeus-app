# Mobile Table Management Testing Guide

## Setup Instructions

1. **Environment Setup**
   ```bash
   cd mobile/czeus
   cp .env.example .env  # Already done
   npm install           # Already done
   ```

2. **Supabase Database Requirements**
   - The app connects to Supabase database with table `pos_tables`
   - Environment variables are already configured in `.env`
   - Demo mode fallback is available if Supabase is not accessible

## Testing the Implementation

### 1. Start the Development Server
```bash
cd mobile/czeus
npm start
# Or for web testing:
npm run web
```

### 2. Navigate to Tables Screen
- The app will start with authentication flow
- After login, navigate to the Tables section from the main navigation

### 3. Test CRUD Operations

#### View Tables
- Tables are loaded from Supabase `pos_tables` table
- If Supabase is not accessible, demo mode with local data is used
- Pull-to-refresh functionality is available
- Search functionality works across table name and capacity

#### Create Table
- Tap the blue "+" floating action button
- Fill in table name and number of seats
- Form validation ensures required fields and positive numbers
- Success message appears on creation

#### Edit Table
- Tap on any table item
- Select "Edit" from the action menu
- Modify table name or number of seats
- Save changes with validation

#### Delete Table
- Long press on a table item, OR
- Tap on table and select "Delete" from action menu
- Confirmation dialog appears
- Table is soft-deleted (deleted_at timestamp set)

### 4. Demo Mode Testing
To test demo mode functionality:
- Disconnect from internet, OR
- Modify Supabase URL in `.env` to an invalid URL
- App will automatically fall back to local demo data
- All CRUD operations work with local storage
- Console logs will show "Using demo mode" messages

## Key Features Implemented

✅ **Database Integration**
- Connects to Supabase `pos_tables` table
- Maps database schema to mobile UI types
- Proper error handling and fallback

✅ **CRUD Operations**
- **Create**: Add new tables with form validation
- **Read**: Display tables with search and refresh
- **Update**: Edit existing tables 
- **Delete**: Soft delete with confirmation

✅ **User Experience**
- Loading states during operations
- Error handling with user-friendly messages
- Pull-to-refresh functionality
- Touch-friendly interactions (tap, long press)
- Form validation and feedback

✅ **Mobile Optimizations**
- React Query for caching and real-time updates
- Offline/demo mode support
- Native mobile UI patterns
- Responsive design

## Database Schema Mapping

```sql
-- Supabase table structure
CREATE TABLE pos_tables (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  updated_at timestamp with time zone null,
  deleted_at timestamp with time zone null,
  table_name text not null,
  number_of_seats numeric not null default '1'::numeric,
  constraint tables_pkey primary key (id)
);
```

```typescript
// Mobile UI mapping
interface Table {
  id: number;
  name: string;           // maps to table_name
  capacity: number;       // maps to number_of_seats
  status: string;         // defaults to 'available'
  description: string;    // generated from name and capacity
}
```

## Demo Mode Fallback

The app automatically detects when Supabase is not accessible and switches to demo mode:
- Uses local data storage for CRUD operations
- Maintains same UI functionality
- Console logs indicate demo mode usage
- No user interruption or error states

This ensures the app works even without internet connectivity or Supabase access.