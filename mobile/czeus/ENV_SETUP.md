# Mobile App Environment Setup

## Quick Setup (Required)

⚠️ **Important**: The mobile app will fall back to demo mode if environment variables are not configured!

### Step 1: Copy Environment File
```bash
# Navigate to the mobile app directory
cd mobile/czeus

# Copy the example environment file
cp .env.example .env
```

The `.env.example` file contains the correct Supabase credentials for this project.

## Required Environment Variables

The `.env` file should contain the following variables:

```env
EXPO_PUBLIC_SUPABASE_URL=https://zrzljtoctzpvrkbckthr.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpyemxqdG9jdHpwdnJrYmNrdGhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQxMjc3MzksImV4cCI6MjA2OTcwMzczOX0.PWkiEi2Q18-11AXIO_hcKCAZR3JPQkp-fEEvrAzUbKY
EXPO_PUBLIC_SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpyemxqdG9jdHpwdnJrYmNrdGhyIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NDEyNzczOSwiZXhwIjoyMDY5NzAzNzM5fQ.h6sssgDPr_Egq8rjJjrLLw8PHciwv1a6SwJioB-w8ac
EXPO_PUBLIC_SUPABASE_SESSION_STORAGE_KEY=sb-zrzljtoctzpvrkbckthr-auth-token
```

## Database Requirements

The mobile app expects the following table structure in Supabase:

### profiles table
```sql
create table public.profiles (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  updated_at timestamp with time zone null,
  deleted_at timestamp with time zone null,
  first_name text not null,
  middle_name text null,
  last_name text not null,
  birth_day date null,
  profile_picture text null,
  email text not null,
  role public.role_enum not null,
  phone text null,
  position text null,
  address text null,
  constraint Profiles_pkey primary key (id)
) TABLESPACE pg_default;
```

## Authentication Features

The mobile app now supports:

- **Real Supabase Authentication**: No more demo mode
- **User Registration**: Creates profile entries automatically
- **Password Reset**: Real email-based password reset
- **Session Persistence**: Automatic login on app restart
- **Profile Integration**: Fetches user data from profiles table

## Setup Instructions

1. **Copy the environment file**: `cp .env.example .env`
2. Ensure your Supabase database has the `profiles` table created
3. Configure Row Level Security (RLS) policies as needed
4. Test authentication by registering a new user or signing in

## Troubleshooting

### App Falls Back to Demo Mode
If the user management system shows demo data instead of connecting to Supabase:

1. Verify the `.env` file exists in `mobile/czeus/`
2. Check that environment variables are correctly set
3. Ensure Supabase URL and keys are valid
4. Test database connectivity

### Environment File Missing
```bash
# If you see "Missing Supabase environment variables" error:
cd mobile/czeus
cp .env.example .env
```

## Security Notes

- The `.env` file is automatically ignored by git
- Never commit environment variables to version control
- Use environment-specific credentials for different deployments